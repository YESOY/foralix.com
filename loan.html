<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  
  <script>
  // Force HTTPS redirect - more reliable version
  if (window.location.protocol === 'http:') {
    // Full page redirect to HTTPS
    window.location.href = 'https://' + window.location.host + window.location.pathname + window.location.search + window.location.hash;
  }

  </script>

  <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-WDSN8J1KJ6"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-WDSN8J1KJ6');
</script>

  <script>
  // Track calculator usage
  function trackCalculatorUsage(calculatorName) {
    gtag('event', 'calculator_used', {
      'event_category': 'Calculators',
      'event_label': calculatorName
    });
  }

  // Track social shares
  function trackSocialShare(platform) {
    gtag('event', 'share', {
      'event_category': 'Social',
      'event_label': platform
    });
  }
</script>
  
  <title>Free Loan Calculator - Calculate Payments & Interest - SmartCalcHub</title>
  <meta name="description" content="Calculate your monthly loan payments instantly with this free online loan calculator. Easy, fast, and accurate.">
  <style>
    :root {
      --brand-primary: #007BFF;
      --brand-primary-dark: #0056b3;
      --brand-gradient: linear-gradient(135deg, #007BFF 0%, #0056b3 100%);
      --background: #f8fafc;
      --surface: #ffffff;
      --text-primary: #1e293b;
      --text-secondary: #475569;
      --text-muted: #64748b;
      --border: #e2e8f0;
      --border-light: #f1f5f9;
      --shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
      --radius: 12px;
      --radius-lg: 20px;
      --transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }

    * {
      box-sizing: border-box;
      margin: 0;
      padding: 0;
    }

    body {
      font-family: 'Inter', 'Segoe UI', system-ui, -apple-system, Roboto, Arial, sans-serif;
      background: var(--background);
      color: var(--text-primary);
      line-height: 1.6;
      padding: 20px;
      max-width: 1000px;
      margin: 0 auto;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Enhanced Header */
    .header {
      text-align: center;
      padding: 30px 20px;
      background: var(--surface);
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      margin-bottom: 30px;
      position: relative;
      overflow: hidden;
    }

    .header::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      height: 4px;
      background: var(--brand-gradient);
    }

    .header-content {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 16px;
      flex-wrap: wrap;
    }

    .brand-logo {
      width: 60px;
      height: 60px;
      border-radius: 16px;
      background: var(--brand-gradient);
      display: flex;
      align-items: center;
      justify-content: center;
      box-shadow: 0 8px 20px rgba(0, 123, 255, 0.3);
      transition: var(--transition);
    }

    .brand-logo:hover {
      transform: scale(1.05) rotate(5deg);
    }

    .logo-icon {
      font-size: 28px;
      color: white;
      font-weight: bold;
    }

    .brand-text {
      text-align: left;
    }

    .header-title {
      margin: 0;
      font-size: 28px;
      font-weight: 700;
      background: var(--brand-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
      line-height: 1.2;
    }

    .header-subtitle {
      color: var(--text-secondary);
      font-size: 14px;
      font-weight: 500;
      margin-top: 4px;
    }

    .header-link {
      text-decoration: none;
      color: inherit;
      transition: var(--transition);
    }

    .header-link:hover {
      opacity: 0.9;
    }

    /* Main Container */
    .container {
      background: var(--surface);
      padding: 30px;
      border-radius: var(--radius-lg);
      box-shadow: var(--shadow);
      flex-grow: 1;
      border: 1px solid var(--border-light);
    }

    /* Calculator Header */
    .calculator-header {
      text-align: center;
      margin-bottom: 30px;
      position: relative;
    }

    .calculator-title {
      font-size: 24px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .calculator-subtitle {
      color: var(--text-secondary);
      font-size: 14px;
    }

    .calculator-icon {
      width: 80px;
      height: 80px;
      border-radius: 20px;
      background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
      display: flex;
      align-items: center;
      justify-content: center;
      margin: 0 auto 20px;
      border: 2px solid #e0f2fe;
    }

    .calculator-icon i {
      font-size: 36px;
      background: var(--brand-gradient);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    /* Form Elements */
    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      margin-bottom: 8px;
      font-weight: 600;
      color: var(--text-secondary);
      font-size: 14px;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .form-input {
      width: 100%;
      padding: 16px;
      border-radius: var(--radius);
      border: 2px solid var(--border);
      font-size: 16px;
      transition: var(--transition);
      background: #fafbfc;
      font-weight: 500;
    }

    .form-input:focus {
      outline: none;
      border-color: var(--brand-primary);
      background: white;
      box-shadow: 0 0 0 4px rgba(0, 123, 255, 0.1);
      transform: translateY(-2px);
    }

    .form-input.error {
      border-color: #ef4444;
      background: #fef2f2;
    }

    .error-message {
      color: #ef4444;
      font-size: 14px;
      margin-top: 6px;
      display: none;
      font-weight: 500;
    }

    /* Buttons */
    .btn {
      width: 100%;
      padding: 16px;
      border-radius: var(--radius);
      border: none;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: var(--transition);
      position: relative;
      overflow: hidden;
    }

    .btn::before {
      content: '';
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
      transition: left 0.5s;
    }

    .btn:hover::before {
      left: 100%;
    }

    .btn-primary {
      background: var(--brand-gradient);
      color: white;
      box-shadow: 0 4px 12px rgba(0, 123, 255, 0.3);
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0, 123, 255, 0.4);
    }

    .btn-secondary {
      background: #64748b;
      color: white;
    }

    .btn-secondary:hover {
      background: #475569;
    }

    /* Results */
    .result {
      margin-top: 24px;
      font-weight: bold;
      font-size: 18px;
      text-align: center;
      padding: 20px;
      border-radius: var(--radius);
      background-color: #f8fafc;
      display: none;
      border-left: 4px solid transparent;
    }

    .result.success {
      background-color: #f0fdf4;
      color: #166534;
      border-left-color: #22c55e;
    }

    .result.error {
      background-color: #fef2f2;
      color: #991b1b;
      border-left-color: #ef4444;
    }

    /* Additional Results */
    .additional-results {
      margin-top: 24px;
      display: none;
      background: #f8fafc;
      border-radius: var(--radius);
      padding: 20px;
      border: 1px solid var(--border-light);
    }

    .result-item {
      display: flex;
      justify-content: space-between;
      padding: 12px 0;
      border-bottom: 1px solid var(--border-light);
    }

    .result-item:last-child {
      border-bottom: none;
    }

    .result-label {
      color: var(--text-secondary);
      font-weight: 500;
    }

    .result-value {
      font-weight: 700;
      color: var(--text-primary);
    }

    /* Share Section */
    .share {
      text-align: center;
      margin-top: 24px;
      padding: 16px;
      background: #f0f9ff;
      border-radius: var(--radius);
    }

    .share-link {
      text-decoration: none;
      color: var(--brand-primary);
      font-size: 14px;
      display: inline-flex;
      align-items: center;
      gap: 8px;
      transition: var(--transition);
      font-weight: 600;
    }

    .share-link:hover {
      color: var(--brand-primary-dark);
      transform: translateY(-1px);
    }

    /* Footer */
    .footer {
      text-align: center;
      font-size: 12px;
      margin-top: 40px;
      color: var(--text-muted);
      padding: 20px 0;
    }

    /* Back Button */
    .back-button {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      background: var(--surface);
      color: var(--text-primary);
      padding: 14px 24px;
      text-decoration: none;
      border-radius: var(--radius);
      margin-top: 30px;
      transition: var(--transition);
      font-weight: 600;
      text-align: center;
      border: 2px solid var(--border);
      box-shadow: var(--shadow);
    }

    .back-button:hover {
      background: var(--brand-primary);
      color: white;
      transform: translateY(-2px);
      box-shadow: var(--shadow-lg);
      border-color: var(--brand-primary);
    }

    .button-container {
      text-align: center;
      margin-top: 40px;
    }

    /* Responsive Adjustments */
    @media (max-width: 480px) {
      body {
        padding: 16px;
      }
      
      .container {
        padding: 24px 20px;
      }
      
      .calculator-title {
        font-size: 22px;
      }
      
      .header-content {
        flex-direction: column;
        text-align: center;
      }
      
      .brand-text {
        text-align: center;
      }
    }

    /* Animation for results */
    @keyframes fadeInUp {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .fade-in-up {
      animation: fadeInUp 0.5s ease-out;
    }
  </style>
</head>
<body>
  <header class="header" role="banner">
    <div class="header-content">
      <div class="brand-logo">
        <span class="logo-icon">‚àë</span>
      </div>
      <div class="brand-text">
        <a href="index.html" class="header-link">
          <h1 class="header-title">SmartCalcHub</h1>
          <div class="header-subtitle">Professional Financial Calculators</div>
        </a>
      </div>
    </div>
  </header>

  <!-- Add this to Loan Calculator page after header and before calculator grid -->

  <section class="content-section" style="background: var(--surface); padding: 40px; border-radius: var(--radius-lg); margin-bottom: 30px; box-shadow: var(--shadow);">
    <div class="content-header" style="text-align: center; margin-bottom: 30px;">
        <h2 style="color: var(--text-primary); font-size: 2rem; margin-bottom: 15px;">Loan Repayment Calculator</h2>
        <p style="color: var(--text-secondary); font-size: 1.1rem; max-width: 800px; margin: 0 auto;">Calculate your monthly loan payments, total interest costs, and create an amortization schedule for any type of loan including mortgages, auto loans, and personal loans.</p>
    </div>
    
    <div class="content-grid" style="display: grid; gap: 30px; grid-template-columns: 1fr;">
        <div class="content-block">
            <h3 style="color: var(--brand-primary); margin-bottom: 15px;">Understanding Loan Amortization</h3>
            <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 15px;">
                Loan amortization is the process of paying off a loan through regular payments over time. Each payment covers both interest charges and principal reduction. In the early years of a loan, most of your payment goes toward interest, while in later years, more goes toward reducing the principal balance.
            </p>
            <p style="color: var(--text-secondary); line-height: 1.7;">
                Understanding amortization helps you see the true cost of borrowing and plan your financial future. It also shows you how extra payments can significantly reduce your total interest costs and shorten your loan term.
            </p>
        </div>
        
        <div class="content-block">
            <h3 style="color: var(--brand-primary); margin-bottom: 15px;">How Our Loan Calculator Works</h3>
            <p style="color: var(--text-secondary); line-height: 1.7; margin-bottom: 15px;">
                Our calculator uses the standard loan payment formula to determine your monthly payment:
            </p>
            <div style="background: #f8f9fa; padding: 20px; border-radius: var(--radius); border-left: 4px solid var(--brand-primary); margin-bottom: 15px;">
                <p style="font-family: monospace; color: var(--text-primary); margin: 0;">
                    M = P √ó [r(1+r)^n] / [(1+r)^n - 1]
                </p>
            </div>
            <p style="color: var(--text-secondary); line-height: 1.7;">
                Where:<br>
                ‚Ä¢ <strong>M</strong> = Monthly Payment<br>
                ‚Ä¢ <strong>P</strong> = Principal Loan Amount<br>
                ‚Ä¢ <strong>r</strong> = Monthly Interest Rate (Annual Rate √∑ 12)<br>
                ‚Ä¢ <strong>n</strong> = Total Number of Payments (Loan Term in Years √ó 12)
            </p>
        </div>
        
        <div class="content-block">
            <h3 style="color: var(--brand-primary); margin-bottom: 15px;">Types of Loans You Can Calculate</h3>
            <div style="display: grid; gap: 15px; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));">
                <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 20px; border-radius: var(--radius);">
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">Mortgage Loans</h4>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">Calculate monthly payments for home purchases, refinancing, or home equity loans with terms from 10 to 30 years.</p>
                </div>
                <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 20px; border-radius: var(--radius);">
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">Auto Loans</h4>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">Plan your car purchase with loan terms typically ranging from 2 to 7 years for new and used vehicles.</p>
                </div>
                <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 20px; border-radius: var(--radius);">
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">Personal Loans</h4>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">Calculate payments for debt consolidation, home improvements, or major purchases with flexible terms.</p>
                </div>
            </div>
        </div>
        
        <div class="content-block">
            <h3 style="color: var(--brand-primary); margin-bottom: 15px;">Key Loan Concepts Explained</h3>
            <div style="background: #f8f9fa; padding: 25px; border-radius: var(--radius);">
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--text-primary); margin-bottom: 8px;">Principal vs. Interest</h4>
                    <p style="color: var(--text-secondary); margin: 0; font-size: 0.95rem;">The principal is the original loan amount borrowed, while interest is the cost of borrowing that money. Your payments are split between reducing the principal and paying interest charges.</p>
                </div>
                <div style="margin-bottom: 20px;">
                    <h4 style="color: var(--text-primary); margin-bottom: 8px;">Annual Percentage Rate (APR)</h4>
                    <p style="color: var(--text-secondary); margin: 0; font-size: 0.95rem;">APR includes both the interest rate and any additional fees or costs, giving you a more accurate picture of the total cost of borrowing.</p>
                </div>
                <div>
                    <h4 style="color: var(--text-primary); margin-bottom: 8px;">Amortization Schedule</h4>
                    <p style="color: var(--text-secondary); margin: 0; font-size: 0.95rem;">This detailed table shows how each payment is allocated between principal and interest over the life of the loan, helping you understand how your balance decreases over time.</p>
                </div>
            </div>
        </div>
        
        <div class="content-block">
            <h3 style="color: var(--brand-primary); margin-bottom: 15px;">Money-Saving Loan Tips</h3>
            <div style="display: grid; gap: 15px; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));">
                <div style="border: 1px solid var(--border); padding: 20px; border-radius: var(--radius);">
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">üîÑ Make Extra Payments</h4>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">Even one extra payment per year can reduce a 30-year mortgage by several years and save thousands in interest.</p>
                </div>
                <div style="border: 1px solid var(--border); padding: 20px; border-radius: var(--radius);">
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">üìâ Consider Shorter Terms</h4>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">Shorter loan terms typically have lower interest rates and significantly reduce total interest costs, though monthly payments are higher.</p>
                </div>
                <div style="border: 1px solid var(--border); padding: 20px; border-radius: var(--radius);">
                    <h4 style="color: var(--text-primary); margin-bottom: 10px;">üè¶ Improve Your Credit</h4>
                    <p style="color: var(--text-secondary); font-size: 0.9rem; margin: 0;">A higher credit score can qualify you for lower interest rates, potentially saving you thousands over the life of a loan.</p>
                </div>
            </div>
        </div>
        
        <div class="content-block">
            <h3 style="color: var(--brand-primary); margin-bottom: 15px;">Common Questions</h3>
            <div style="background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%); padding: 25px; border-radius: var(--radius);">
                <div style="margin-bottom: 15px;">
                    <h4 style="color: var(--text-primary); margin-bottom: 8px;">What's the difference between interest rate and APR?</h4>
                    <p style="color: var(--text-secondary); margin: 0; font-size: 0.95rem;">The interest rate is the cost of borrowing the principal, while APR includes additional fees and costs. APR gives you a better picture of the total borrowing cost.</p>
                </div>
                <div style="margin-bottom: 15px;">
                    <h4 style="color: var(--text-primary); margin-bottom: 8px;">How does loan term affect my payments?</h4>
                    <p style="color: var(--text-secondary); margin: 0; font-size: 0.95rem;">Longer terms mean lower monthly payments but higher total interest costs. Shorter terms have higher payments but lower total costs.</p>
                </div>
                <div>
                    <h4 style="color: var(--text-primary); margin-bottom: 8px;">Can I pay off my loan early?</h4>
                    <p style="color: var(--text-secondary); margin: 0; font-size: 0.95rem;">Most loans allow early repayment, but some may have prepayment penalties. Check your loan agreement and consider the savings from reduced interest.</p>
                </div>
            </div>
        </div>
    </div>
</section>

  <main class="container" role="main">
    <div class="calculator-header">
      <div class="calculator-icon">
        <i>üí∞</i>
      </div>
      <h1 class="calculator-title">Loan Repayment Calculator</h1>
      <p class="calculator-subtitle">Calculate your monthly payments with precision</p>
    </div>

    <div class="form-group">
      <label for="amount" class="form-label">Loan Amount</label>
      <input type="number" id="amount" class="form-input" placeholder="Enter loan amount in USD" min="0" step="0.01" />
      <div id="amount-error" class="error-message">Please enter a valid loan amount</div>
    </div>

    <div class="form-group">
      <label for="rate" class="form-label">Annual Interest Rate</label>
      <input type="number" id="rate" class="form-input" placeholder="Enter annual interest rate (%)" min="0" step="0.01" />
      <div id="rate-error" class="error-message">Please enter a valid interest rate</div>
    </div>

    <div class="form-group">
      <label for="term" class="form-label">Loan Term</label>
      <input type="number" id="term" class="form-input" placeholder="Enter loan term in years" min="1" step="1" />
      <div id="term-error" class="error-message">Please enter a valid loan term (minimum 1 year)</div>
    </div>

    <button id="calculate-btn" class="btn btn-primary">
      Calculate Monthly Payment
    </button>

    <div id="result" class="result" role="status" aria-live="polite"></div>

    <div id="additional-results" class="additional-results">
      <div class="result-item">
        <span class="result-label">Total Payments:</span>
        <span class="result-value" id="total-payments">‚Äî</span>
      </div>
      <div class="result-item">
        <span class="result-label">Total Interest:</span>
        <span class="result-value" id="total-interest">‚Äî</span>
      </div>
    </div>

    <div class="share">
      <a href="#" id="share-link" class="share-link">
        <span>üì§</span> Share this tool on WhatsApp
      </a>
    </div>
  </main>

  <div class="button-container">
    <a href="index.html" class="back-button">
      ‚Üê Back to Homepage
    </a>
  </div>

  <footer class="footer" role="contentinfo">
    &copy; 2025 SmartCalcHub | All Rights Reserved
  </footer>

  <script>
    // DOM utility functions
    const $ = (id) => document.getElementById(id);
    const $$ = (selector) => document.querySelectorAll(selector);
    
    // Format currency
    const formatCurrency = (amount) => {
      return new Intl.NumberFormat('en-US', {
        style: 'currency',
        currency: 'USD',
        minimumFractionDigits: 2
      }).format(amount);
    };

    // Input validation
    const validateInputs = () => {
      const amount = parseFloat($('amount').value);
      const rate = parseFloat($('rate').value);
      const term = parseFloat($('term').value);
      
      let isValid = true;
      
      // Reset error states
      $$('.error-message').forEach(el => el.style.display = 'none');
      $$('.form-input').forEach(el => el.classList.remove('error'));
      
      // Validate loan amount
      if (isNaN(amount) || amount <= 0) {
        $('amount-error').style.display = 'block';
        $('amount').classList.add('error');
        isValid = false;
      }
      
      // Validate interest rate
      if (isNaN(rate) || rate < 0) {
        $('rate-error').style.display = 'block';
        $('rate').classList.add('error');
        isValid = false;
      }
      
      // Validate loan term
      if (isNaN(term) || term < 1) {
        $('term-error').style.display = 'block';
        $('term').classList.add('error');
        isValid = false;
      }
      
      return isValid;
    };

    // Calculate loan payment
    const calculateLoanPayment = () => {
      if (!validateInputs()) return null;
      
      const amount = parseFloat($('amount').value);
      const annualRate = parseFloat($('rate').value) / 100;
      const termYears = parseFloat($('term').value);
      
      const monthlyRate = annualRate / 12;
      const termMonths = termYears * 12;
      
      // Handle zero interest rate
      if (monthlyRate === 0) {
        return amount / termMonths;
      }
      
      // Standard loan payment formula
      const monthlyPayment = (amount * monthlyRate) / (1 - Math.pow(1 + monthlyRate, -termMonths));
      
      return monthlyPayment;
    };

    // Calculate additional loan details
    const calculateLoanDetails = (monthlyPayment) => {
      const amount = parseFloat($('amount').value);
      const termYears = parseFloat($('term').value);
      const termMonths = termYears * 12;
      
      const totalPayments = monthlyPayment * termMonths;
      const totalInterest = totalPayments - amount;
      
      return {
        totalPayments,
        totalInterest
      };
    };

    // Display results
    const displayResults = (monthlyPayment, loanDetails) => {
      const resultElement = $('result');
      const additionalResults = $('additional-results');
      
      if (monthlyPayment === null) {
        resultElement.textContent = 'Please fix the errors above to calculate your payment.';
        resultElement.className = 'result error';
        resultElement.style.display = 'block';
        additionalResults.style.display = 'none';
        return;
      }
      
      resultElement.textContent = `Your estimated monthly payment is ${formatCurrency(monthlyPayment)}`;
      resultElement.className = 'result success fade-in-up';
      resultElement.style.display = 'block';
      
      // Display additional results
      $('total-payments').textContent = formatCurrency(loanDetails.totalPayments);
      $('total-interest').textContent = formatCurrency(loanDetails.totalInterest);
      additionalResults.className = 'additional-results fade-in-up';
      additionalResults.style.display = 'block';
    };

    // Main calculation function
    const calculateLoan = () => {
      const monthlyPayment = calculateLoanPayment();
      const loanDetails = monthlyPayment ? calculateLoanDetails(monthlyPayment) : null;
      displayResults(monthlyPayment, loanDetails);
    };

    // Share on WhatsApp
    const shareOnWhatsApp = () => {
      const url = window.location.href;
      const text = "Check out this free Loan Repayment Calculator from SmartCalcHub: " + url;
      const whatsappUrl = "https://wa.me/?text=" + encodeURIComponent(text);
      window.open(whatsappUrl, "_blank");
    };

    // Reset form
    const resetForm = () => {
      $('amount').value = '';
      $('rate').value = '';
      $('term').value = '';
      $('result').style.display = 'none';
      $('additional-results').style.display = 'none';
      
      // Reset error states
      $$('.error-message').forEach(el => el.style.display = 'none');
      $$('.form-input').forEach(el => el.classList.remove('error'));
      
      // Focus on first input
      $('amount').focus();
    };

    // Initialize event listeners
    const initializeEventListeners = () => {
      $('calculate-btn').addEventListener('click', calculateLoan);
      $('share-link').addEventListener('click', shareOnWhatsApp);
      
      // Calculate on Enter key in any input
      $$('.form-input').forEach(input => {
        input.addEventListener('keypress', (e) => {
          if (e.key === 'Enter') {
            calculateLoan();
          }
        });
        
        // Clear errors when user starts typing
        input.addEventListener('input', () => {
          input.classList.remove('error');
          $(`${input.id}-error`).style.display = 'none';
        });
      });
    };

    // Initialize the application
    const init = () => {
      initializeEventListeners();
      console.log('Enhanced Loan Calculator initialized');
    };

    // Start when DOM is loaded
    document.addEventListener('DOMContentLoaded', init);
  </script>
</body>
</html>
